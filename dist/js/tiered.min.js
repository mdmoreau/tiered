function tiered(e){var t={};return t.body=document.body,t.element=e,t.list=t.element.querySelector(":scope > ul"),t.matches=function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)},t.getParents=function(e,r){for(var i=[];(e=e.parentNode)&&e!==document;)r&&!t.matches(e,r)||i.unshift(e);return i},t.init=function(){t.setup(),t.update()},t.setup=function(){t.element.classList.add("tiered"),t.setupList(),t.setupHeader(),t.setupLimits()},t.setupList=function(){var e=document.createElement("div");e.innerHTML='<div class="tiered__scroll">'+t.list.outerHTML+"</div>",t.element.replaceChild(e.firstChild,t.list),t.scroll=document.querySelector(".tiered__scroll"),t.list=t.scroll.querySelector(":scope > ul"),t.items=t.list.querySelectorAll("li")},t.setupHeader=function(){var e=document.createElement("div");e.classList.add("tiered__header"),t.element.appendChild(e),t.header=document.querySelector(".tiered__header"),t.header.style.right=t.scroll.offsetWidth-t.list.clientWidth+"px"},t.setupLimits=function(){for(var e=0;e<t.items.length;e+=1){var r=t.items[e];if(r.querySelectorAll("ul").length){var i=r.offsetTop-t.list.offsetTop,l=i+r.offsetHeight,s=r.querySelector(":scope > :first-child").offsetHeight,a=t.getParents(r,"li");if(a.length)for(var o=0;o<a.length;o+=1){var d=a[o];i-=d.querySelector(":scope > :first-child").offsetHeight,l-=d.querySelector(":scope > :first-child").offsetHeight}r.classList.add("tiered__parent"),r.setAttribute("data-top",i),r.setAttribute("data-bottom",l),r.setAttribute("data-height",s)}}t.parents=t.list.querySelectorAll(".tiered__parent")},t.update=function(){t.updateHeader()},t.updateHeader=function(){var e=t.scroll.scrollTop;t.header.innerHTML="";for(var r=0;r<t.parents.length;r+=1){var i=t.parents[r],l=i.getAttribute("data-top"),s=i.getAttribute("data-bottom"),a=i.getAttribute("data-height"),o=s-a;if(e>l&&s>e){var d=document.createElement("div"),c=i.querySelector(":scope > :first-child").cloneNode(!0);if(c.classList.add("tiered__header__item"),e>o&&(c.classList.add("tiered__header__item--offset"),c.style.marginTop=o-e+"px"),d.innerHTML="<ul><li>"+c.outerHTML+"</li></ul>",c=d.firstChild,t.header.querySelectorAll("ul").length){var n=t.header.querySelectorAll("li");n[n.length-1].parentNode.appendChild(c)}else t.header.appendChild(c)}}requestAnimationFrame(t.updateHeader)},t}